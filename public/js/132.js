"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[132],{3132:(e,a,n)=>{n.r(a),n.d(a,{default:()=>Z});var t=n(6598),l={class:"card border-0 rounded shadow"},r={class:"card-body"},o=(0,t.createElementVNode)("h4",null,"TAMBAH DATA PENJUALAN",-1),c=(0,t.createElementVNode)("hr",null,null,-1);var i=n(9038),d={class:"mb-3"},s=(0,t.createElementVNode)("label",{class:"form-label"},"Pilih Barang",-1),u={class:"row gap-2"},m={class:"col-sm col-12"},p=(0,t.createTextVNode)("Data Tidak Ditemukan."),g=(0,t.createTextVNode)("Data Tidak Ada."),b={class:"col-sm col-12"},h=(0,t.createTextVNode)("Data Tidak Ditemukan."),f=(0,t.createTextVNode)("Data Tidak Ada."),N={class:"mb-3"},V=(0,t.createElementVNode)("label",{class:"form-label"},"Jumlah Barang",-1),E={class:"input-group"},j=["max","disabled"],B={key:0,class:"input-group-text"},k={class:"mb-3"},y={key:0,class:"ms-3 text-muted fst-italic"},v=(0,t.createElementVNode)("hr",null,null,-1),D={class:"table-responsive"},A={class:"table table-striped table-hover table-bordered"},O=(0,t.createElementVNode)("thead",null,[(0,t.createElementVNode)("tr",null,[(0,t.createElementVNode)("th",{scope:"col"},"NO"),(0,t.createElementVNode)("th",{scope:"col"},"NAMA BARANG"),(0,t.createElementVNode)("th",{scope:"col"},"HARGA"),(0,t.createElementVNode)("th",{scope:"col"},"JUMLAH BARANG"),(0,t.createElementVNode)("th",{scope:"col"},"SATUAN"),(0,t.createElementVNode)("th",{scope:"col"},"TOTAL"),(0,t.createElementVNode)("th",{scope:"col"},"AKSI")])],-1),w=["onClick"],T={key:1,class:"text-center"},C=[(0,t.createElementVNode)("tr",null,[(0,t.createElementVNode)("td",{colspan:"7"},"Belum Ada Data")],-1)],S=(0,t.createElementVNode)("th",{colspan:"3",class:"text-center"},"TOTAL",-1),x=(0,t.createElementVNode)("th",null,null,-1),P=(0,t.createElementVNode)("th",null,null,-1),R={class:"mb-3"},M=["disabled"];var U=n(2444),H=n(6486);function _(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,t)}return n}function G(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?_(Object(n),!0).forEach((function(a){L(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function L(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}const I={components:{VSelect:U.ZP},props:{penjualan:Object},remember:"penjualan",setup:function(){var e={options:[],selected:null,loading:!1},a=(0,t.reactive)(G({},e)),n=(0,H.debounce)((function(e){a.loading=!0,axios.post("/api/barang",{value:e}).then((function(e){a.options=e.data})).catch((function(e){console.log("error",e)})).finally((function(){a.loading=!1}))}),500),l=(0,t.reactive)(G(G({},e),{},{jumlah:0})),r=(0,H.debounce)((function(e){l.loading=!0,axios.post("/api/barang/detail",{value:e,restok:!0,id_barang:a.selected.id}).then((function(e){l.options=e.data})).catch((function(e){console.log("error",e)})).finally((function(){l.loading=!1}))}),500);return{barang:a,getDataBarang:n,detailBarang:l,getDataDetailBarang:r,pushBarang:function(n,t){-1===n.findIndex((function(e){return e.id===t.id}))&&(l.jumlah>0&&(t.nama=a.selected.nama+" — "+t.nama,n.push(G(G({},t),{},{jumlah:l.jumlah,satuan:a.selected.satuan}))),Object.assign(a,e),Object.assign(l,G(G({},e),{},{jumlah:0})))}}}};var J=n(3744);const F={components:{FormPenjualan:(0,J.Z)(I,[["render",function(e,a,n,l,r,o){var c=(0,t.resolveComponent)("v-select");return(0,t.openBlock)(),(0,t.createElementBlock)("form",{onSubmit:a[9]||(a[9]=(0,t.withModifiers)((function(a){return e.$emit("submit")}),["prevent"]))},[(0,t.createElementVNode)("div",d,[s,(0,t.createElementVNode)("div",u,[(0,t.createElementVNode)("div",m,[(0,t.createVNode)(c,{options:l.barang.options,searchable:!0,loading:l.barang.loading,"allow-empty":!1,"internal-search":!1,disabled:n.penjualan.processing,"custom-label":function(e){return e.kode+" — "+e.nama},modelValue:l.barang.selected,"onUpdate:modelValue":a[0]||(a[0]=function(e){return l.barang.selected=e}),placeholder:"Pilih Barang",class:"form-group",label:"nama","track-by":"nama","select-label":"","deselect-label":"Terpilih","selected-label":"Terpilih",onSearchChange:l.getDataBarang,onClose:a[1]||(a[1]=function(e){return l.barang.options=[]}),onOpen:a[2]||(a[2]=function(e){l.detailBarang.selected=null,l.getDataBarang("")})},{noResult:(0,t.withCtx)((function(){return[p]})),noOptions:(0,t.withCtx)((function(){return[g]})),_:1},8,["options","loading","disabled","custom-label","modelValue","onSearchChange"])]),(0,t.createElementVNode)("div",b,[(0,t.createVNode)(c,{options:l.detailBarang.options,searchable:!0,loading:l.detailBarang.loading,"allow-empty":!1,"internal-search":!1,disabled:n.penjualan.processing||null===l.barang.selected||l.barang.selected.jumlah_jenis<1,"custom-label":function(a){var n=a.nama,t=a.harga;return n+" — "+e.getRupiah(t)},modelValue:l.detailBarang.selected,"onUpdate:modelValue":a[3]||(a[3]=function(e){return l.detailBarang.selected=e}),placeholder:"Pilih Detail Barang",class:"form-group",label:"nama","track-by":"nama","select-label":"","deselect-label":"Terpilih","selected-label":"Terpilih",onSearchChange:l.getDataDetailBarang,onClose:a[4]||(a[4]=function(e){return l.detailBarang.options=[]}),onOpen:a[5]||(a[5]=function(e){return l.getDataDetailBarang("")})},{noResult:(0,t.withCtx)((function(){return[h]})),noOptions:(0,t.withCtx)((function(){return[f]})),_:1},8,["options","loading","disabled","custom-label","modelValue","onSearchChange"])])])]),(0,t.createElementVNode)("div",N,[V,(0,t.createElementVNode)("div",E,[(0,t.withDirectives)((0,t.createElementVNode)("input",{type:"number",class:"form-control",min:"1",max:l.detailBarang.selected?l.detailBarang.selected.stok:0,disabled:n.penjualan.processing||null===l.detailBarang.selected,"onUpdate:modelValue":a[6]||(a[6]=function(e){return l.detailBarang.jumlah=e}),placeholder:"Masukkan Jumlah Barang"},null,8,j),[[t.vModelText,l.detailBarang.jumlah]]),null!==l.barang.selected?((0,t.openBlock)(),(0,t.createElementBlock)("span",B,(0,t.toDisplayString)(l.barang.selected.satuan),1)):(0,t.createCommentVNode)("",!0)])]),(0,t.createElementVNode)("div",k,[(0,t.createElementVNode)("span",{class:(0,t.normalizeClass)([{disabled:n.penjualan.processing||null===l.barang.selected||null===l.detailBarang.selected||l.detailBarang.jumlah<1},"btn btn-primary btn-md shadow-sm"]),onClick:a[7]||(a[7]=function(e){return l.pushBarang(n.penjualan.barang,l.detailBarang.selected)})}," TAMBAH BARANG ",2),null!==l.detailBarang.selected?((0,t.openBlock)(),(0,t.createElementBlock)("span",y," Total Harga: "+(0,t.toDisplayString)(e.getRupiah(l.detailBarang.jumlah*l.detailBarang.selected.harga)),1)):(0,t.createCommentVNode)("",!0)]),v,(0,t.createElementVNode)("div",D,[(0,t.createElementVNode)("table",A,[O,(0,t.createVNode)(t.Transition,{name:"fade",mode:"out-in"},{default:(0,t.withCtx)((function(){return[n.penjualan.barang.length>0?((0,t.openBlock)(),(0,t.createBlock)(t.TransitionGroup,{key:0,name:"fade",mode:"out-in",tag:"tbody"},{default:(0,t.withCtx)((function(){return[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(n.penjualan.barang,(function(a,l){return(0,t.openBlock)(),(0,t.createElementBlock)("tr",{key:a.id},[(0,t.createElementVNode)("td",null,(0,t.toDisplayString)(l+1),1),(0,t.createElementVNode)("td",null,(0,t.toDisplayString)(a.nama),1),(0,t.createElementVNode)("td",null,(0,t.toDisplayString)(e.getRupiah(a.harga)),1),(0,t.createElementVNode)("td",null,(0,t.toDisplayString)(a.jumlah),1),(0,t.createElementVNode)("td",null,(0,t.toDisplayString)(a.satuan),1),(0,t.createElementVNode)("td",null,(0,t.toDisplayString)(e.getRupiah(a.harga*a.jumlah)),1),(0,t.createElementVNode)("td",null,[(0,t.createElementVNode)("span",{onClick:function(e){return n.penjualan.barang.splice(l,1)},class:"btn btn-danger btn-md shadow-sm"}," HAPUS ",8,w)])])})),128))]})),_:1})):((0,t.openBlock)(),(0,t.createElementBlock)("tbody",T,C))]})),_:1}),(0,t.createElementVNode)("tfoot",null,[(0,t.createElementVNode)("tr",null,[S,(0,t.createElementVNode)("th",null,(0,t.toDisplayString)(n.penjualan.barang.reduce((function(e,a){return e+a.jumlah}),0)),1),x,(0,t.createElementVNode)("th",null,(0,t.toDisplayString)(e.getRupiah(n.penjualan.barang.reduce((function(e,a){return e+a.jumlah*a.harga}),0))),1),P])])])]),(0,t.createElementVNode)("div",R,[(0,t.createElementVNode)("button",{type:"submit",disabled:n.penjualan.processing||n.penjualan.barang.length<1,class:"btn btn-primary btn-md shadow-sm me-2"}," SIMPAN ",8,M),(0,t.createElementVNode)("span",{class:(0,t.normalizeClass)([{disabled:n.penjualan.processing||n.penjualan.barang.length<1},"btn btn-warning btn-md shadow-sm"]),onClick:a[8]||(a[8]=function(e){return n.penjualan.reset()})}," RESET ",2)])],32)}]])},setup:function(){return{penjualan:(0,i.cI)({barang:[]})}}},Z=(0,J.Z)(F,[["render",function(e,a,n,i,d,s){var u=(0,t.resolveComponent)("inertia-head"),m=(0,t.resolveComponent)("form-penjualan");return(0,t.openBlock)(),(0,t.createElementBlock)(t.Fragment,null,[(0,t.createVNode)(u,{title:"Tambah Penjualan"}),(0,t.createElementVNode)("div",null,[(0,t.createElementVNode)("div",l,[(0,t.createElementVNode)("div",r,[o,c,(0,t.createVNode)(m,{penjualan:i.penjualan,onSubmit:a[0]||(a[0]=function(e){return i.penjualan.post("/transaksi/penjualan")})},null,8,["penjualan"])])])])],64)}]])}}]);