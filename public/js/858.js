"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[858],{6858:(e,a,t)=>{t.r(a),t.d(a,{default:()=>ue});var n=t(6598),l={class:"card border-0 rounded shadow"},r={class:"card-body"},o=(0,n.createElementVNode)("h4",null,"TAMBAH DATA PEMBELIAN",-1),i=(0,n.createElementVNode)("hr",null,null,-1);var c=t(9038),s={class:"mb-3"},d=(0,n.createElementVNode)("label",{class:"form-label"},"Pilih Barang",-1),u={class:"row gap-2"},m={class:"col-sm col-12"},p=(0,n.createTextVNode)("Data Tidak Ditemukan."),b=(0,n.createTextVNode)("Data Tidak Ada."),g={class:"col-sm col-12"},h=(0,n.createTextVNode)("Data Tidak Ditemukan."),N=(0,n.createTextVNode)("Data Tidak Ada."),V={class:"mb-3"},f={class:"row gap-2"},E={class:"col-sm col-12"},k=(0,n.createElementVNode)("label",{class:"form-label"},"Jumlah Barang",-1),B={class:"input-group"},v=["disabled"],y={key:0,class:"input-group-text"},D={class:"col-sm col-12"},C=(0,n.createElementVNode)("label",{class:"form-label"},"Dikembalikan",-1),T={class:"input-group"},w=["disabled"],S={key:0,class:"input-group-text"},A={class:"mb-3"},O=(0,n.createElementVNode)("label",{class:"form-label"},"Harga Barang",-1),j={class:"input-group"},x=(0,n.createElementVNode)("span",{class:"input-group-text"},"Rp.",-1),P=["disabled"],M=(0,n.createElementVNode)("span",{class:"input-group-text"},",00",-1),R={class:"mb-3"},U=(0,n.createElementVNode)("hr",null,null,-1),I={class:"mb-3"},H=(0,n.createElementVNode)("label",{class:"form-label"},"Nomor Nota",-1),G=["disabled"],L={key:0,class:"invalid-feedback"},z={class:"mb-3"},F=(0,n.createElementVNode)("label",{class:"form-label"},"Nama Supplier",-1),J=(0,n.createTextVNode)("Data Tidak Ditemukan."),K=(0,n.createTextVNode)("Data Tidak Ada."),Z={key:0,class:"invalid-feedback"},$={class:"table-responsive"},q={class:"table table-striped table-hover table-bordered"},Q=(0,n.createElementVNode)("thead",null,[(0,n.createElementVNode)("tr",null,[(0,n.createElementVNode)("th",{scope:"col"},"NO"),(0,n.createElementVNode)("th",{scope:"col"},"NAMA BARANG"),(0,n.createElementVNode)("th",{scope:"col"},"HARGA BARANG"),(0,n.createElementVNode)("th",{scope:"col"},"JUMLAH BARANG"),(0,n.createElementVNode)("th",{scope:"col"},"DIKEMBALIKAN"),(0,n.createElementVNode)("th",{scope:"col"},"SATUAN"),(0,n.createElementVNode)("th",{scope:"col"},"TOTAL"),(0,n.createElementVNode)("th",{scope:"col"},"AKSI")])],-1),W=["onClick"],X={key:1,class:"text-center"},Y=[(0,n.createElementVNode)("tr",null,[(0,n.createElementVNode)("td",{colspan:"8"},"Belum Ada Data")],-1)],ee=(0,n.createElementVNode)("th",{colspan:"3",class:"text-center"},"TOTAL",-1),ae=(0,n.createElementVNode)("th",null,null,-1),te=(0,n.createElementVNode)("th",null,null,-1),ne={class:"mb-3"},le=["disabled"];function re(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function oe(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?re(Object(t),!0).forEach((function(a){ie(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):re(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function ie(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}const ce={components:{VSelect:t(2444).ZP},props:{pembelian:Object},remember:"pembelian",setup:function(){var e=_.debounce((function(e,a,t){e.loading=!0,axios.post(a,t).then((function(a){return e.options=a.data})).catch((function(e){return console.error("error: ",e)})).finally((function(){return e.loading=!1}))}),500),a={options:[],selected:null,loading:!1},t=(0,n.reactive)({options:[],loading:!1}),l=(0,n.reactive)(oe({},a)),r=(0,n.reactive)(oe(oe({},a),{},{jumlah:0,harga:0,kembali:0}));return{supplier:t,getDataSupplier:function(a){return e(t,"/api/supplier",{value:a})},barang:l,getDataBarang:function(a){return e(l,"/api/barang",{value:a})},detailBarang:r,getDataDetailBarang:function(a){return e(r,"/api/barang/detail",{value:a,restok:!0,id_barang:l.selected.id})},pushBarang:function(e,t){-1===function(e,a){return e.findIndex((function(e){return e.id===a.id}))}(e,t)&&(t.nama=l.selected.nama+" — "+t.nama,e.push(oe(oe({},t),{},{jumlah:r.jumlah,harga:r.harga,kembali:r.kembali,satuan:l.selected.satuan})),Object.assign(l,a),Object.assign(r,oe(oe({},a),{},{jumlah:0,harga:0,kembali:0})))}}}};var se=t(3744);const de={components:{FormPembelian:(0,se.Z)(ce,[["render",function(e,a,t,l,r,o){var i=(0,n.resolveComponent)("v-select");return(0,n.openBlock)(),(0,n.createElementBlock)("form",{onSubmit:a[16]||(a[16]=(0,n.withModifiers)((function(a){return e.$emit("submit")}),["prevent"]))},[(0,n.createElementVNode)("div",s,[d,(0,n.createElementVNode)("div",u,[(0,n.createElementVNode)("div",m,[(0,n.createVNode)(i,{options:l.barang.options,searchable:!0,loading:l.barang.loading,"allow-empty":!1,"internal-search":!1,disabled:t.pembelian.processing,"custom-label":function(e){return e.kode+" — "+e.nama},modelValue:l.barang.selected,"onUpdate:modelValue":a[0]||(a[0]=function(e){return l.barang.selected=e}),placeholder:"Pilih Barang",class:"form-group",label:"nama","track-by":"nama","select-label":"","deselect-label":"Terpilih","selected-label":"Terpilih",onSearchChange:l.getDataBarang,onClose:a[1]||(a[1]=function(e){return l.barang.options=[]}),onOpen:a[2]||(a[2]=function(e){l.detailBarang.selected=null,l.getDataBarang("")})},{noResult:(0,n.withCtx)((function(){return[p]})),noOptions:(0,n.withCtx)((function(){return[b]})),_:1},8,["options","loading","disabled","custom-label","modelValue","onSearchChange"])]),(0,n.createElementVNode)("div",g,[(0,n.createVNode)(i,{options:l.detailBarang.options,searchable:!0,loading:l.detailBarang.loading,"allow-empty":!1,"internal-search":!1,disabled:t.pembelian.processing||null===l.barang.selected||l.barang.selected.jumlah_jenis<1,modelValue:l.detailBarang.selected,"onUpdate:modelValue":a[3]||(a[3]=function(e){return l.detailBarang.selected=e}),placeholder:"Pilih Detail Barang",class:"form-group",label:"nama","track-by":"nama","select-label":"","deselect-label":"Terpilih","selected-label":"Terpilih",onSearchChange:l.getDataDetailBarang,onClose:a[4]||(a[4]=function(e){return l.detailBarang.options=[]}),onOpen:a[5]||(a[5]=function(e){return l.getDataDetailBarang("")})},{noResult:(0,n.withCtx)((function(){return[h]})),noOptions:(0,n.withCtx)((function(){return[N]})),_:1},8,["options","loading","disabled","modelValue","onSearchChange"])])])]),(0,n.createElementVNode)("div",V,[(0,n.createElementVNode)("div",f,[(0,n.createElementVNode)("div",E,[k,(0,n.createElementVNode)("div",B,[(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"number",class:"form-control",min:"0",disabled:t.pembelian.processing||null===l.detailBarang.selected,"onUpdate:modelValue":a[6]||(a[6]=function(e){return l.detailBarang.jumlah=e}),placeholder:"Masukkan jumlah pembelian"},null,8,v),[[n.vModelText,l.detailBarang.jumlah]]),null!==l.barang.selected?((0,n.openBlock)(),(0,n.createElementBlock)("span",y,(0,n.toDisplayString)(l.barang.selected.satuan),1)):(0,n.createCommentVNode)("",!0)])]),(0,n.createElementVNode)("div",D,[C,(0,n.createElementVNode)("div",T,[(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"number",min:"0",class:"form-control",disabled:t.pembelian.processing||null===l.detailBarang.selected,"onUpdate:modelValue":a[7]||(a[7]=function(e){return l.detailBarang.kembali=e}),placeholder:"Masukkan Jumlah Dikembalikan"},null,8,w),[[n.vModelText,l.detailBarang.kembali]]),null!==l.barang.selected?((0,n.openBlock)(),(0,n.createElementBlock)("span",S,(0,n.toDisplayString)(l.barang.selected.satuan),1)):(0,n.createCommentVNode)("",!0)])])])]),(0,n.createElementVNode)("div",A,[O,(0,n.createElementVNode)("div",j,[x,(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"number",min:"0",class:"form-control",step:"100",disabled:t.pembelian.processing||null===l.detailBarang.selected,"onUpdate:modelValue":a[8]||(a[8]=function(e){return l.detailBarang.harga=e}),placeholder:"Masukkan Harga Barang"},null,8,P),[[n.vModelText,l.detailBarang.harga]]),M])]),(0,n.createElementVNode)("div",R,[(0,n.createElementVNode)("span",{class:(0,n.normalizeClass)([{disabled:t.pembelian.processing||null===l.barang.selected||null===l.detailBarang.selected||l.detailBarang.jumlah<1||l.detailBarang.harga<1},"btn btn-primary btn-md shadow-sm"]),onClick:a[9]||(a[9]=function(e){return l.pushBarang(t.pembelian.barang,l.detailBarang.selected)})}," TAMBAH BARANG ",2)]),U,(0,n.createElementVNode)("div",I,[H,(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text",class:(0,n.normalizeClass)(["form-control",{"is-invalid":t.pembelian.errors.no_nota}]),disabled:t.pembelian.processing,"onUpdate:modelValue":a[10]||(a[10]=function(e){return t.pembelian.no_nota=e}),onInput:a[11]||(a[11]=function(e){return t.pembelian.clearErrors("no_nota")}),placeholder:"Masukkan Nomor Nota pembelian"},null,42,G),[[n.vModelText,t.pembelian.no_nota]]),(0,n.createVNode)(n.Transition,{name:"fade"},{default:(0,n.withCtx)((function(){return[t.pembelian.errors.no_nota?((0,n.openBlock)(),(0,n.createElementBlock)("div",L,(0,n.toDisplayString)(t.pembelian.errors.no_nota),1)):(0,n.createCommentVNode)("",!0)]})),_:1})]),(0,n.createElementVNode)("div",z,[F,(0,n.createVNode)(i,{options:l.supplier.options,searchable:!0,loading:l.supplier.loading,class:(0,n.normalizeClass)([{"is-invalid":t.pembelian.errors["supplier.id"]},"form-group"]),"allow-empty":!1,"internal-search":!1,disabled:t.pembelian.processing,modelValue:t.pembelian.supplier,"onUpdate:modelValue":a[12]||(a[12]=function(e){return t.pembelian.supplier=e}),placeholder:"Pilih Supplier",label:"nama","track-by":"nama","select-label":"","deselect-label":"Terpilih","selected-label":"Terpilih",onSearchChange:l.getDataSupplier,onClose:a[13]||(a[13]=function(e){return l.supplier.options=[]}),onOpen:a[14]||(a[14]=function(e){t.pembelian.clearErrors("supplier.id"),l.getDataSupplier("")})},{noResult:(0,n.withCtx)((function(){return[J]})),noOptions:(0,n.withCtx)((function(){return[K]})),_:1},8,["options","loading","class","disabled","modelValue","onSearchChange"]),(0,n.createVNode)(n.Transition,{name:"fade"},{default:(0,n.withCtx)((function(){return[t.pembelian.errors["supplier.id"]?((0,n.openBlock)(),(0,n.createElementBlock)("div",Z,(0,n.toDisplayString)(t.pembelian.errors["supplier.id"]),1)):(0,n.createCommentVNode)("",!0)]})),_:1})]),(0,n.createElementVNode)("div",$,[(0,n.createElementVNode)("table",q,[Q,(0,n.createVNode)(n.Transition,{name:"fade",mode:"out-in"},{default:(0,n.withCtx)((function(){return[t.pembelian.barang.length>0?((0,n.openBlock)(),(0,n.createBlock)(n.TransitionGroup,{key:0,name:"fade",mode:"out-in",tag:"tbody"},{default:(0,n.withCtx)((function(){return[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(t.pembelian.barang,(function(a,l){return(0,n.openBlock)(),(0,n.createElementBlock)("tr",{key:a.id},[(0,n.createElementVNode)("td",null,(0,n.toDisplayString)(l+1),1),(0,n.createElementVNode)("td",null,(0,n.toDisplayString)(a.nama),1),(0,n.createElementVNode)("td",null,(0,n.toDisplayString)(e.getRupiah(a.harga)),1),(0,n.createElementVNode)("td",null,(0,n.toDisplayString)(a.jumlah),1),(0,n.createElementVNode)("td",null,(0,n.toDisplayString)(a.kembali),1),(0,n.createElementVNode)("td",null,(0,n.toDisplayString)(a.satuan),1),(0,n.createElementVNode)("td",null,(0,n.toDisplayString)(e.getRupiah(a.harga*(a.jumlah-a.kembali))),1),(0,n.createElementVNode)("td",null,[(0,n.createElementVNode)("span",{onClick:function(e){return t.pembelian.barang.splice(l,1)},class:"btn btn-danger btn-md shadow-sm"}," HAPUS ",8,W)])])})),128))]})),_:1})):((0,n.openBlock)(),(0,n.createElementBlock)("tbody",X,Y))]})),_:1}),(0,n.createElementVNode)("tfoot",null,[(0,n.createElementVNode)("tr",null,[ee,(0,n.createElementVNode)("th",null,(0,n.toDisplayString)(t.pembelian.barang.reduce((function(e,a){return e+a.jumlah}),0)),1),(0,n.createElementVNode)("th",null,(0,n.toDisplayString)(t.pembelian.barang.reduce((function(e,a){return e+a.kembali}),0)),1),ae,(0,n.createElementVNode)("th",null,(0,n.toDisplayString)(e.getRupiah(t.pembelian.barang.reduce((function(e,a){return e+(a.jumlah-a.kembali)*a.harga}),0))),1),te])])])]),(0,n.createElementVNode)("div",ne,[(0,n.createElementVNode)("button",{type:"submit",disabled:t.pembelian.processing||null===t.pembelian.supplier||t.pembelian.barang.length<1,class:"btn btn-primary btn-md shadow-sm me-2"}," SIMPAN ",8,le),(0,n.createElementVNode)("span",{class:(0,n.normalizeClass)([{disabled:t.pembelian.processing||null===t.pembelian.supplier||t.pembelian.barang.length<1},"btn btn-warning btn-md shadow-sm"]),onClick:a[15]||(a[15]=function(e){return t.pembelian.reset()})}," RESET ",2)])],32)}]])},setup:function(){return{pembelian:(0,c.cI)({supplier:null,barang:[],no_nota:""})}}},ue=(0,se.Z)(de,[["render",function(e,a,t,c,s,d){var u=(0,n.resolveComponent)("inertia-head"),m=(0,n.resolveComponent)("form-pembelian");return(0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,null,[(0,n.createVNode)(u,{title:"Tambah Pembelian"}),(0,n.createElementVNode)("div",null,[(0,n.createElementVNode)("div",l,[(0,n.createElementVNode)("div",r,[o,i,(0,n.createVNode)(m,{pembelian:c.pembelian,onSubmit:a[0]||(a[0]=function(e){return c.pembelian.post("/transaksi/pembelian")})},null,8,["pembelian"])])])])],64)}]])}}]);